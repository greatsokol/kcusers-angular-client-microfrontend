<div>
  <title-component title="Список пользователей" [back]=false>
    <button *ngIf="dataLoader.getData() as data"
            aria-current="page" class="btn btn-outline-primary"
            routerLink="logins/{{data.principal.userName}}">История авторизаций</button>
  </title-component>

  <div *ngIf="dataLoader.getData() as data" class="test-data-div">
    <table class="table table-hover">
      <thead>
      <tr class="table-primary unselectable sticky-top">
        <th scope="col">Пользователь</th>
        <th scope="col">Рилм</th>
        <th scope="col">Идентификатор</th>
        <th scope="col">Создан</th>
        <th scope="col">Последний логин</th>
        <th scope="col">Комментарий</th>
        <th scope="col">Статус</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let user of data.payload.content" style="cursor: pointer;"
          class="{{ user.enabled ? (user.manuallyEnabledTime == null ? 'table-success' : 'table-warning') : 'table-danger' }}"
          id="{{user.userId}}" routerLink="{{user.realmName}}/{{user.userName}}"
      >
        <th><span>{{ user.userName }}</span></th>
        <td><span>{{ user.realmName }}</span></td>
        <td><span>{{ user.userId }}</span></td>
        <td><span>{{ user.created != 0 ? (user.created | date : dateFormat) : '' }}</span></td>
        <td><span>{{ user.lastLogin != 0 ? (user.lastLogin | date : dateFormat) : '' }}</span></td>
        <td><span>{{ user.comment }}</span></td>
        <td>
          <span *ngIf="user.enabled" class="badge text-bg-success">Включен</span>
          <span *ngIf="!user.enabled" class="badge text-bg-danger">Заблокирован</span>
        </td>
      </tr>
      </tbody>
    </table>
    <pager-component [pageLoader]=dataLoader></pager-component>
  </div>
  <div *ngIf="dataLoader.getError() as error" class="test-error-div">{{ error }}</div>
  <progress-component *ngIf="!dataLoader.getData() && !dataLoader.getError()" class="test-progress"></progress-component>
</div>

